

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>èµ¤ vs ç´« ãƒŸãƒ‹TCGï¼ˆ30æšãƒ‡ãƒƒã‚­ç‰ˆï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #181818;
      color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      padding: 10px;
      font-size: 18px;
      background: #242424;
      margin: 0;
    }
    #game {
      max-width: 520px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 8px;
    }
    .player-area {
      border: 1px solid #444;
      border-radius: 10px;
      padding: 8px;
      background: #202020;
    }
    .player-header {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      flex-wrap: wrap;
    }
    .zone-title { font-size: 11px; margin-top: 6px; opacity: 0.8; }
    .zone { display: flex; flex-wrap: wrap; gap: 4px; }
    .card {
      border-radius: 6px;
      padding: 4px;
      font-size: 11px;
      width: 46%;
      border: 1px solid #555;
      background: #121212;
    }
    .card-red { border-color: #f44336; }
    .card-purple { border-color: #9c27b0; }
    .card-name { font-weight: bold; font-size: 12px; }
    .card-stats { font-size: 10px; }
    button { margin-top: 3px; width: 100%; }
    #controls {
      border-top: 1px solid #444;
      border-bottom: 1px solid #444;
      padding: 6px;
      display: flex;
      gap: 6px;
      justify-content: center;
      font-size: 12px;
    }
    #log {
      padding: 6px;
      font-size: 11px;
      max-height: 200px;
      overflow-y: auto;
      background: #151515;
    }
  </style>
</head>
<body>
<h1>èµ¤ vs ç´« ãƒŸãƒ‹TCGï¼ˆ30æšãƒ‡ãƒƒã‚­ç‰ˆï¼‰</h1>
<div id="game">
  <div id="player1" class="player-area"></div>
  <div id="player0" class="player-area"></div>
  <div id="controls">
    <button onclick="drawForCurrent()">ãƒ‰ãƒ­ãƒ¼</button>
    <button onclick="endTurn()">ã‚¿ãƒ¼ãƒ³çµ‚äº†</button>
    <span id="turnInfo"></span>
  </div>
  <div id="log"></div>
</div>

<script>
const cards = {
  101:{id:101,name:"ç´…è“®ã®çªæ’ƒè€…",color:"red",type:"character",cost:3,strength:4,willpower:1,lore:1,inkable:true},
  102:{id:102,name:"çƒˆç«ã®å‡¦åˆ‘äºº",color:"red",type:"character",cost:5,strength:5,willpower:4,lore:2,inkable:true},
  111:{id:111,name:"çµ‚ç„‰ã®å¤§ç«",color:"red",type:"song",cost:7,inkable:false,ability:"destroyAll"},
  201:{id:201,name:"å¹»æƒ³ã®æ›¸è¨˜",color:"purple",type:"character",cost:2,strength:1,willpower:3,lore:1,inkable:true},
  211:{id:211,name:"æ°·ã®å¥³ç‹ ã‚¢ã‚¤ã‚¹ãƒ•ã‚£ãƒ¼ãƒ",color:"purple",type:"character",cost:8,strength:4,willpower:6,lore:3,inkable:true,ability:"stun2"}
};

// æ±ç”¨ã‚¤ãƒ³ã‚¯ã‚­ãƒ£ãƒ©ã‚’è‡ªå‹•ç”Ÿæˆï¼ˆ20æšãšã¤ï¼‰
let id = 300;
for(let i=0;i<20;i++){
  cards[id]={id,name:`èµ¤ã®å…µå£«${i+1}`,color:"red",type:"character",cost:2,strength:2,willpower:2,lore:1,inkable:true}; id++;
  cards[id]={id,name:`ç´«ã®å­¦å¾’${i+1}`,color:"purple",type:"character",cost:2,strength:1,willpower:3,lore:1,inkable:true}; id++;
}

const redDeck=[], purpleDeck=[];
Object.values(cards).forEach(c=>{
  if(c.color==="red") redDeck.push(c.id);
  if(c.color==="purple") purpleDeck.push(c.id);
});

function shuffle(a){return a.sort(()=>Math.random()-0.5);}

let gameState = {
  current:0,
  players:[
    {name:"èµ¤ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",deck:shuffle([...redDeck]),hand:[],board:[],grave:[],ink:[],lore:0},
    {name:"ç´«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",deck:shuffle([...purpleDeck]),hand:[],board:[],grave:[],ink:[],lore:0}
  ],
  log:[]
};

function log(t){gameState.log.push(t); if(gameState.log.length>50)gameState.log.shift();}

function drawForCurrent(){
  const p=gameState.players[gameState.current];
  const card=p.deck.pop();
  if(card){p.hand.push(card);log(`${p.name}ãŒãƒ‰ãƒ­ãƒ¼`);}
  render();
}

function playCharacter(pi,hi){
  const p=gameState.players[pi];
  const c=cards[p.hand[hi]];
  if(p.ink.length<c.cost)return alert("ã‚¤ãƒ³ã‚¯ä¸è¶³");
  p.hand.splice(hi,1);
  p.board.push({id:c.id,rest:false,stun:0});
  log(`${p.name}ãŒ${c.name}ã‚’å¬å–š`);

  // æ°·ã®å¥³ç‹ï¼š2ä½“å‡çµ
  if(c.ability==="stun2"){
    const enemy=gameState.players[1-pi];
    enemy.board.slice(0,2).forEach(b=>b.stun=1);
    log("â„ï¸ç›¸æ‰‹ã‚­ãƒ£ãƒ©2ä½“ãŒå‡çµï¼");
  }
  render();
}

function playInk(pi,hi){
  const p=gameState.players[pi];
  const c=cards[p.hand[hi]];
  if(!c.inkable) return alert("ã‚¤ãƒ³ã‚¯ä¸å¯");
  p.hand.splice(hi,1);
  p.ink.push(c.id);
  render();
}

// çµ‚ç„‰ã®å¤§ç«
function playSong(pi,hi){
  const p=gameState.players[pi];
  const c=cards[p.hand[hi]];
  if(c.ability==="destroyAll"){
    gameState.players.forEach(pl=>{
      pl.board.forEach(b=>pl.grave.push(b.id));
      pl.board=[];
    });
    log("ğŸ”¥ çµ‚ç„‰ã®å¤§ç«ï¼å…¨ã‚­ãƒ£ãƒ©æ¶ˆæ»…ï¼");
  }
  p.hand.splice(hi,1);
  render();
}

function endTurn(){
  gameState.current=1-gameState.current;
  const p=gameState.players[gameState.current];
  p.board.forEach(b=>{
    if(b.stun>0){b.stun--; b.rest=true;}
    else b.rest=false;
  });
  log(`ã‚¿ãƒ¼ãƒ³äº¤ä»£ï¼š${p.name}`);
  render();
}

function render(){
  ["player0","player1"].forEach((id,pi)=>{
    const p=gameState.players[pi];
    let h=`<div class="player-header">${p.name}ï½œãƒ­ã‚¢:${p.lore}ï½œã‚¤ãƒ³ã‚¯:${p.ink.length}</div>`;
    h+=`<div class="zone-title">å ´</div><div class="zone">`;
    p.board.forEach(b=>{
      const c=cards[b.id];
      h+=`<div class="card card-${c.color}">
        <div class="card-name">${c.name}</div>
        <div class="card-stats">${c.strength}/${c.willpower}</div>
        ${b.stun?`<div>â„å‡çµä¸­</div>`:""}
      </div>`;
    });
    h+=`</div><div class="zone-title">æ‰‹æœ­</div><div class="zone">`;
    p.hand.forEach((cid,i)=>{
      const c=cards[cid];
      h+=`<div class="card card-${c.color}">
        <div class="card-name">${c.name}</div>
        ${pi===gameState.current?`
        <button onclick="playInk(${pi},${i})">ã‚¤ãƒ³ã‚¯</button>
        ${c.type==="character"?`<button onclick="playCharacter(${pi},${i})">å¬å–š</button>`:""}
        ${c.type==="song"?`<button onclick="playSong(${pi},${i})">ä½¿ç”¨</button>`:""}
        `:""}
      </div>`;
    });
    h+=`</div>`;
    document.getElementById(id).innerHTML=h;
  });

  document.getElementById("turnInfo").textContent =
    `ç¾åœ¨ï¼š${gameState.players[gameState.current].name}`;

  document.getElementById("log").innerHTML =
    gameState.log.map(l=>`ãƒ»${l}`).join("<br>");
}

// åˆæœŸãƒ‰ãƒ­ãƒ¼
gameState.players.forEach(p=>{for(let i=0;i<5;i++)drawForCurrent();});
render();
</script>
</body>
</html>